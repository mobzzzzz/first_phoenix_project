<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="CSS/landing-style.css">
    <link rel="stylesheet" href="CSS/landing-title.css">
    <link rel="stylesheet" href="CSS/landing-nav.css">
    <link rel="stylesheet" href="CSS/landing-member.css">
    <link rel="stylesheet" href="CSS/landing-introduce.css">
    <link rel="stylesheet" href="CSS/landing-post.css">
    <link rel="stylesheet" href="CSS/landing-todo.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="CSS/landing-animation.css">
    <link rel="stylesheet" href="CSS/landing-modal.css">
    <link rel="stylesheet" href="CSS/nav.css">
    <link rel="stylesheet" href="CSS/landing-scroll-up.css">
    <link rel="stylesheet" href="CSS/landing-bottom.css">



    <title>Document</title>
    <script src="https://kit.fontawesome.com/f7affbdaa9.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
        import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
        import {
            deleteDoc,
        } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDz4wh7z369v-whnyYeWaI3quPab2hxFmA",
            authDomain: "phoenix-first-project.firebaseapp.com",
            projectId: "phoenix-first-project",
            storageBucket: "phoenix-first-project.appspot.com",
            messagingSenderId: "943608506043",
            appId: "1:943608506043:web:c6dc699ceedf5090406b9e"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        //목표 설정
        $("#landing-todo-content-write-button").click(async function () {
            let content = $('#landing-todo-content-write-input').val()
            if (content == "") {
                alert("목표를 입력해주세요!");
            } else {
                let docs = {
                    'content': content
                };
                let today = new Date();
                let time = `${today.getFullYear()}${today.getMonth() + 1}${today.getDate()}${today.getHours()}${today.getMinutes()}${today.getSeconds()}`;
                await setDoc(doc(db, "jinwoo-objective", time), docs);
                alert("항해를 시작합니다");
                window.location.reload();
            }
        })

        // 데이터베이스에서 값 불러오기
        let docs1 = await getDocs(collection(db, "jinwoo-objective"));
        docs1.forEach((doc) => {
            let rows = doc.data();
            let content = rows["content"];
            let docid = doc.id;

            let todo_html = ` <div id="landing-todo-read-content">
                <div class="landing-todo-content-list-item-box">
                    <span class="landing-todo-content-list-item"><i class="fa-solid fa-sailboat"></i> ${content} </span>
                </div>
                <div class="landing-todo-content-list-item-box">
                    <button id="landing-todo-content-list-item-delete-button" type="button"
                        class="btn btn-danger"><i class="fas fa-anchor"></i>항해 종료 <span style ="display:none">${docid}</span></button>
                </div>
            </div>`;
            $("#landing-todo-content-list").append(todo_html);
        });
        $(document).on("click", "#landing-todo-content-list-item-delete-button", async function (delevent) {
            let deldocid = delevent.target.children["1"].innerHTML;
            await deleteDoc(doc(db, "jinwoo-objective", deldocid));
            alert("항해 종료");
            window.location.reload();
        });



        $("#landing-post-write-content-button").click(async function () {
            let nickname = $('#landing-post-write-nickname').val()
            let content = $('#landing-post-write-content').val()
            if (nickname == "" || content == "") {
                alert("비어있는 값이 있으면 안됩니다!");
                console.log(nickname, content)
            } else {
                let today = new Date();
                let time = `${today.getFullYear()}${today.getMonth() + 1}${today.getDate()}${today.getHours()}${today.getMinutes()}${today.getSeconds()}`;
                let writemonth = today.getMonth() + 1
                let writedate = today.getDate()
                let writehours = today.getHours()
                let writeminutes = today.getMinutes()
                let docs = {
                    'nickname': nickname,
                    'content': content,
                    'writemonth': writemonth,
                    'writedate': writedate,
                    'writehours': writehours,
                }
                await setDoc(doc(db, "jinwoo-guestbook", time), docs);
                alert("펄럭 펄럭");
                window.location.reload();
            }
        })

        /* addDoc
           $("#landing-post-write-content-button").click(async function () {
               let doc = {
                   'nickname': $("#landing-post-write-nickname").val(),
                   'content': $("#landing-post-write-content").val()
               };
               await addDoc(collection(db, "jinwoo-guestbook"), doc);
               alert("펄럭 펄럭");
               window.location.reload();
           })
           */

        let docs2 = await getDocs(collection(db, "jinwoo-guestbook"));
        docs2.forEach((doc) => {
            let rows = doc.data();
            let nickname = rows["nickname"];
            let content = rows["content"];
            let writemonth = row["writemonth"]
            let writedate = row["writedate"]
            let writehours = row["writehours"]
            let writeminutes = row["writeminutes"]
            let docid = doc.id;

            let post_html = ` <div id="landing-post-read-main">
                <div><i id="landing-post-read-icon-bird" class="fa-solid fa-dove"></i></div>
                <div id="landing-post-read-box">
                    <div id="landing-post-read-nickname">@${nickname} <span
                            id="landing-post-read-write-date">${writemonth}월${writedate}일${writehours}시${writeminutes}분</span>
                    </div>
                    <div id="landing-post-read-content">
                        <div>
                            <span id="landing-post-read-content-text">${content}</span>
                        </div>
                        <div>
                            <button id="landing-post-read-content-button" type="button" class="btn btn-danger">새
                                복귀요청<span style ="display:none">${docid}</span></button>
                        </div>
                    </div>
                </div>
            </div>`;
            $("#landing-post-read").append(post_html);
        });

        $(document).on("click", "#landing-post-read-content-button", async function (delevent) {
            let deldocid = delevent.target.children["1"].innerHTML;
            await deleteDoc(doc(db, "jinwoo-guestbook", deldocid));
            alert("(새를 부르는 휘파람 소리)");
            window.location.reload();
        });



    </script>
</head>

<body>
    <div id="landing-title">
        <div id="landing-title-text">불사조<i class="fas fa-fire icon-fire"></i>(Phoenix)</div>
    </div>
    <nav id="landing-nav">
        <ul class="nav__list">
            <li class="nav__btn">
                <abbr title="팀 소개"><i id="landing-nav-button-introduce" class="fas fa-question fa-2x"></i></abbr>
            </li>
            <li class="nav__btn">
                <abbr title="멤버들"><i id="landing-nav-button-member" class="fas fa-user fa-2x"></i></abbr>
            </li>
            <li class="nav__btn">
                <abbr title="어디로 가고 있는지"><i id="landing-nav-button-todo" class="fas fa-map fa-2x"></i></abbr>
            <li class="nav__btn">
                </span><abbr title="방명록"><i id="landing-nav-button-post"
                        class="fas fa-feather-pointed fa-2x"></i></i></abbr>
            </li>
        </ul>
    </nav>

    <div id="landing-introduce">
        <div id="lading-introduce-outer">
            <div id="lading-introduce-title">"불" 같은 열정 그 "사" 이에 보이는 "조" 직력</div>
            <div id="lading-introduce-content">4조 불사조입니다.</div>
        </div>
    </div>

    <nav id="landing-member">
        <ul class="nav__list">
            <li class="nav__btn">
                <a class="nav__link" target="_blank" href="../index.html"><abbr title="사이트 만들기 원툴.."><img
                            src="">고진우</abbr></a>
            </li>
            <li class="nav__btn">
                <a class="nav__link" target="_blank" href="../../jaewon/mypage.html"><abbr title="팀장님!"><img
                            src="">노재원</abbr></a>
            </li>
            <li class="nav__btn">
                <a class="nav__link" target="_blank" href="../../jihoon/index.html"><abbr title="알고리즘 고수!"><img
                            src="">권지훈</abbr></a>
            </li>
            <li class="nav__btn">
                <a class="nav__link" target="_blank" href="../../minsoo/index.html"><abbr title="알고리즘 고수!"><img
                            src="">최민수</abbr></a>
            </li>
        </ul>
    </nav>

    <div id="landing-todo">
        <div id="landing-todo-outer">
            <div id="landing-todo-title-box">
                <div id="landing-todo-title-text">
                    항해 지도 / 무엇을 향해 가나요? <i class="fas fa-ship"></i>
                </div>
            </div>
            <div id="landing-todo-content-box">

                <div id="landing-todo-content-list">

                    <div id="landing-todo-read-content">
                        <div class="landing-todo-content-list-item-box">
                            <span class="landing-todo-content-list-item"><i class="fa-solid fa-sailboat"></i> 최강 불사조의
                                페이지의 댓글입니다. 화이팅 화이팅 입니다.</span>
                        </div>
                        <div class="landing-todo-content-list-item-box">
                            <button id="landing-todo-content-list-item-delete-button" type="button"
                                class="btn btn-danger"><i class="fas fa-anchor"></i>항해 종료</button>
                        </div>
                    </div>

                </div>

                <form id="landing-todo-content-form">
                    <input type="text" maxlength="40" placeholder="항로 설정, 돛 펼치기" id="landing-todo-content-write-input"
                        class="btn btn-outline-primary landing-todo-content-button-add">
                    <button id="landing-todo-content-write-button" type="button"
                        class="btn btn-primary landing-todo-content-button-add">
                        <span class="landing-todo-content-button-add">출항!</span></button>
                </form>
            </div>
        </div>
    </div>

    <div id="landing-post">
        <div id="landing-post-box">
            <div id="landing-post-title-box">
                <div id="landing-post-title">새가 전달해주는 편지 <i class="fas fa-scroll"></i> (전서구)</div>
            </div>
            <form id="landing-post-write">
                <div>
                    <input type="text" maxlength="5" style="word-wrap:break-word" placeholder="나는"
                        id="landing-post-write-nickname" class="btn btn-outline-info">
                </div>
                <div>
                    <div id="landing-post-write-content-box">
                        <input type="text" maxlength="40" placeholder="하고 싶은 말은.." id="landing-post-write-content"
                            class="btn btn-outline-success">
                    </div>
                </div>
                <div>
                    <button id="landing-post-write-content-button" type="button" class="btn btn-outline-success">새 날리기
                        <i class="fas fa-file-import"></i></button>
                </div>
            </form>

            <div id="landing-post-read">


                <div id="landing-post-read-main">
                    <div><i id="landing-post-read-icon-bird" class="fa-solid fa-dove"></i></div>
                    <div id="landing-post-read-box">
                        <div id="landing-post-read-nickname">@Nickname <span
                                id="landing-post-read-write-date">4월17일3시22분</span>
                        </div>
                        <div id="landing-post-read-content">
                            <div>
                                <span id="landing-post-read-content-text">최강 불사조의 페이지의 댓글입니다. 화이팅 화이팅 입니다.</span>
                            </div>
                            <div>
                                <button id="landing-post-read-content-button" type="button" class="btn btn-danger">새
                                    복귀요청</button>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>
    </div>

    <div id="landing-bottom">
        <div id="landing-bottom-info">
            <div class="landing-bottom-info-section-all">
                <div>
                    공지사항
                </div>
            </div>
            <div class="landing-bottom-info-section-all">
                <div>
                    <span>Parteners</span>
                    <span> : 스파르타 코딩클럽</span>
                </div>
                <div>
                    <span>Developers</span>
                    <span> : 불사조팀</span>

                </div>
            </div>
            <div class="landing-bottom-info-section-all">
                <div>
                    팀 소개 : 스파르타 코딩 클럽 내일 배움 캠프 4조 불사조
                </div>
            </div>
        </div>
    </div>



    <abbr title="이륙 준비 완료!"><i id="landing-nav-button-scroll-up" class="fas fa-circle-arrow-up"></i></abbr>




    <!--
    <div id="tmi-modal-box" style="display:none">
        <div id="tmi-modal-outer">
            <span id="tmi-modal-inner-text">TMI입니다.. 그래도 보시겠습니까..??</span>
            <div id="tmi-modal-inner-button-box">
                <button id="tmi-modal-inner-button-yes" type="button" class="btn btn-danger">마음 먹었어요</button>
                <button id="tmi-modal-inner-button-no" type="button" class="btn btn-success">마음의 준비가 필요해요</button>
            </div>

        </div>
    </div>

    <div id="tmi-user-component" style="display:none">
        <img src="https://ghiblistudio.store/wp-content/uploads/2021/07/Totoro-Merch-My-Neighbor-Totoro.jpg">
        <div class="bottom-right-tmi-user-component">
            <div class="bottom-right-tmi-user-component-subtitle">스포츠</div>
            <div>: 축구 <i class="fas fa-futbol"></i></div>
        </div>
        <div class="bottom-right-tmi-user-component">
            <div class="bottom-right-tmi-user-component-subtitle">게임</div>
            <div>: 롤( 미드로 마스터까지 가봤습니다..! ) <i class="fas fa-gamepad"></i></div>
        </div>
        <div class="bottom-right-tmi-user-component">
            <div class="bottom-right-tmi-user-component-subtitle">그 외</div>
            <div>: 노래 부르는 걸 상당히 좋아합니다 <i class="fas fa-microphone-lines"></i></div>
        </div>
        <div><button id="bottom-right-tmi-user-component-del-btn" type="button" class="btn btn-info">없애기</button></div>
    </div>
    -->
    <script src="JS/landing-todo.js"></script>
    <script src="JS/landing-post.js"></script>
    <script src="JS/landing-modal.js"></script>
    <script src="JS/landing-nav.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>